(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{174:function(a,t,s){"use strict";s.r(t);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"docker基本操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker基本操作","aria-hidden":"true"}},[a._v("#")]),a._v(" Docker基本操作")]),a._v(" "),s("h2",{attrs:{id:"docker的安装和使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker的安装和使用","aria-hidden":"true"}},[a._v("#")]),a._v(" docker的安装和使用")]),a._v(" "),s("ul",[s("li",[a._v("我用的是Ubuntu16，可以执行下面命令快捷安装")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),s("span",{attrs:{class:"token function"}},[a._v("install")]),a._v(" docker.io\n")])])]),s("ul",[s("li",[a._v("如果是其他linux发行版，如CentOS可以用Yum命令，也可以执行下面的从网络获取的脚本来进行安装")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[a._v("curl")]),a._v(" -s http://get.docker.com"),s("span",{attrs:{class:"token operator"}},[a._v("|")]),a._v("sh\n")])])]),s("h2",{attrs:{id:"docker服务的启动、停止和重启"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker服务的启动、停止和重启","aria-hidden":"true"}},[a._v("#")]),a._v(" docker服务的启动、停止和重启")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{attrs:{class:"token function"}},[a._v("service")]),a._v(" docker start\n"),s("span",{attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{attrs:{class:"token function"}},[a._v("service")]),a._v(" docker stop\n"),s("span",{attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{attrs:{class:"token function"}},[a._v("service")]),a._v(" docker restart\n")])])]),s("ul",[s("li",[a._v("输入")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker version \n")])])]),s("ul",[s("li",[a._v("看到下图就是启动成功了\n"),s("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3372306-9c37ed68d68fd2c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"Paste_Image.png"}})])]),a._v(" "),s("h2",{attrs:{id:"镜像的拉取（pull）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像的拉取（pull）","aria-hidden":"true"}},[a._v("#")]),a._v(" 镜像的拉取（pull）")]),a._v(" "),s("ul",[s("li",[a._v("docker官方的镜像仓库：hub.docker.com")]),a._v(" "),s("li",[a._v("网易的仓库：c.163.com")]),a._v(" "),s("li",[a._v("docker的命令基本都是要root权限的，所以我们直接su进入root进行操作")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("//从远程仓库拉取镜像到本地仓库\ndocker pull "),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" NAME"),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n//显示本地仓库的镜像\ndocker images "),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v("RESPOSITORY"),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n//从指定的一个本地镜像创建一个容器\ndocker run "),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" IMAGE"),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v("COMMAND"),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ARG"),s("span",{attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),a._v("    -d 后台运行\t-p 8080:80 主机端口：容器端口 \n//删除一个镜像\ndocker rmi imageId\n")])])]),s("h2",{attrs:{id:"容器的操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器的操作","aria-hidden":"true"}},[a._v("#")]),a._v(" 容器的操作")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("//打印正在运行的容器，加上-a打印所有容器\ndocker "),s("span",{attrs:{class:"token function"}},[a._v("ps")]),a._v("\n//停止一个容器\ndocker stop containerId\n//重启一个容器\ndocker restart containerId\n//进入一个容器\ndocker "),s("span",{attrs:{class:"token function"}},[a._v("exec")]),a._v(" -it containerId "),s("span",{attrs:{class:"token function"}},[a._v("bash")]),a._v("\n//删除一个容器\ndocker "),s("span",{attrs:{class:"token function"}},[a._v("rm")]),a._v(" containerId\n//删除已经退出运行的所有容器\ndocker "),s("span",{attrs:{class:"token function"}},[a._v("ps")]),a._v(" -a "),s("span",{attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{attrs:{class:"token string"}},[a._v('"Exited"')]),a._v(" "),s("span",{attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{attrs:{class:"token string"}},[a._v("'{print "),s("span",{attrs:{class:"token variable"}},[a._v("$1")]),a._v(" }'")]),s("span",{attrs:{class:"token operator"}},[a._v("|")]),s("span",{attrs:{class:"token function"}},[a._v("xargs")]),a._v(" docker "),s("span",{attrs:{class:"token function"}},[a._v("rm")]),a._v("\n")])])]),s("h2",{attrs:{id:"镜像的创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像的创建","aria-hidden":"true"}},[a._v("#")]),a._v(" 镜像的创建")]),a._v(" "),s("ul",[s("li",[a._v("vim Dockerfile")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("from ubuntu16/tomcat/jpress\n\nMAINTAINER granda grandachn@163.com\n\nENV JAVA_HOME  /usr/lib/jvm/jdk1.8.0_121\nENV PATH      "),s("span",{attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/bin:"),s("span",{attrs:{class:"token variable"}},[a._v("$PATH")]),a._v("\nENV CLASSPATH   .:"),s("span",{attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/lib/dt.jar:"),s("span",{attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/lib/tools.jar\n\nENTRYPOINT /usr/local/tomcat/bin/startup.sh "),s("span",{attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{attrs:{class:"token function"}},[a._v("tail")]),a._v(" -F /root/apache-tomcat-7.0.70/logs/catalina.out\n")])])]),s("ul",[s("li",[a._v("注意：执行完脚本命令后容器是会自动停止的，所以要用tail命令持续输出日志内容，使得容器保持运行")]),a._v(" "),s("li",[a._v("在Dockerfile目录下执行下面命令构建镜像")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("docker build -t jpress:latest "),s("span",{attrs:{class:"token keyword"}},[a._v(".")]),a._v("\n")])])]),s("ul",[s("li",[a._v("也可以根据创建的这个容器来提交一个新的镜像，提交时需要用到容器ID")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("docker commit –m “testMessage” –a “granda” d8990fec2141 testimage\n")])])]),s("ul",[s("li",[a._v("或者，也可以从操作系统模板文件导入一个镜像")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[a._v("wget")]),a._v(" http://download.openvz.org/template/precreated/ubuntu-14.04-x86_64-minimal.tar.gz\n"),s("span",{attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{attrs:{class:"token function"}},[a._v("cat")]),a._v(" ubuntu–14.04–x86_64–minimal.tar.gz "),s("span",{attrs:{class:"token operator"}},[a._v("|")]),a._v(" docker "),s("span",{attrs:{class:"token function"}},[a._v("import")]),a._v(" – ubuntu:14.04\n")])])]),s("h2",{attrs:{id:"镜像的存出和载入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像的存出和载入","aria-hidden":"true"}},[a._v("#")]),a._v(" 镜像的存出和载入")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("docker save –o /data/testimage.tar testimage:latest\ndocker load —input testimage.tar\n//或者\ndocker load "),s("span",{attrs:{class:"token operator"}},[a._v("<")]),a._v(" testimage.tar\n")])])]),s("h2",{attrs:{id:"镜像的上传"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像的上传","aria-hidden":"true"}},[a._v("#")]),a._v(" 镜像的上传")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("docker push NAME"),s("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),s("span",{attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \ndocker tag testimage:lastest granda/testimage:lastest\ndocker push granda/testimage:lastest\n")])])]),s("h2",{attrs:{id:"容器和主机间的文件复制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器和主机间的文件复制","aria-hidden":"true"}},[a._v("#")]),a._v(" 容器和主机间的文件复制")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("docker "),s("span",{attrs:{class:"token function"}},[a._v("cp")]),a._v(" foo.txt mycontainer:/foo.txt\ndocker "),s("span",{attrs:{class:"token function"}},[a._v("cp")]),a._v(" mycontainer:/foo.txt foo.txt\n")])])]),s("h2",{attrs:{id:"linux和远程主机的文件复制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux和远程主机的文件复制","aria-hidden":"true"}},[a._v("#")]),a._v(" Linux和远程主机的文件复制")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[a._v("scp")]),a._v(" /home/granda/Desktop/test.txt root@192.168.1.100:/root/\n")])])])])}],!1,null,null,null);e.options.__file="Docker基本操作.md";t.default=e.exports}}]);