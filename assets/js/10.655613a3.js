(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{167:function(t,s,a){"use strict";a.r(s);var n=a(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"java枚举类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java枚举类","aria-hidden":"true"}},[t._v("#")]),t._v(" Java枚举类")]),t._v(" "),a("p",[t._v("关于Java枚举类的博文有很多，但是很多都是说怎么去用枚举，少有全面地把枚举类给将清楚的。本文将从枚举类的作用说起，到个人对枚举类的一些工程实践，然后从字节码去剖析枚举类的本质，介绍枚举类name和ordinal，EnumSet和EnumMap枚举集合类为何物，最后涉及枚举在单例模式和职责链模式中的应用。")]),t._v(" "),a("h2",{attrs:{id:"枚举类的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#枚举类的作用","aria-hidden":"true"}},[t._v("#")]),t._v(" 枚举类的作用")]),t._v(" "),a("ol",[a("li",[t._v("代码硬编码的魔数，就是说用枚举代替int，可以避免使用数字做条件对比给硬编码到代码中，给后期维护带来隐患。")]),t._v(" "),a("li",[t._v('枚举类可以保存更多字段，用于相应码之类的。java的后端编程中，controller层一般是要给前端返回一个响应码和对应的描述信息，如{code: 200, detail: "执行成功"}，这时就可以将这个响应体写成一个枚举类。')]),t._v(" "),a("li",[t._v("数据库字段的前端展示的格式化可以借助枚举类实现。比如说，数据库存储用户的性别是0和1，数据传回前端的时候要转成男和女就可以借助枚举类，代码可参考后文的示例代码。")])]),t._v(" "),a("h2",{attrs:{id:"枚举类的工程实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#枚举类的工程实践","aria-hidden":"true"}},[t._v("#")]),t._v(" 枚举类的工程实践")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v("  Gender "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("MAN")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"男"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("WOMENR")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"女"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" Map"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Integer"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Gender"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" FROM_CODE_MAP "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("HashMap")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" String name"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" Integer code"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),a("span",{attrs:{class:"token comment"}},[t._v("//jdk8")]),t._v("\n        Arrays"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stream")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Gender"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("values")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("forEach")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" FROM_CODE_MAP"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("put")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token comment"}},[t._v("//上面一行代码对应的jdk7写法")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//        for(Gender e : Gender.values()){")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//            FROM_CODE_MAP.put(e.code, e);")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//        }")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token function"}},[t._v("Gender")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" code"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" Gender "),a("span",{attrs:{class:"token function"}},[t._v("fromCode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fromCodeMap"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("get")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" String "),a("span",{attrs:{class:"token function"}},[t._v("getNameFromCode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fromCodeMap"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("get")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//@Data和@Builder使用lombok的注解，自动给类生成getter、setter方法和build")]),t._v("\n"),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Data")]),t._v("\n"),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Builder")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Result")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Serializable")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" serialVersionUID "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token number"}},[t._v("4578560278556203640")]),t._v("L"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" Integer code"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" String msg"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" E data"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Result"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("success")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("T data"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Result"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token function"}},[t._v("builder")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("code")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("msg")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"OK"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("data")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Result"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("success")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Result"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token function"}},[t._v("builder")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("code")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("msg")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"OK"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("data")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("null"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Result"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("error")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ErrorResult errorResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Result"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token function"}},[t._v("builder")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("code")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("errorResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getCode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("msg")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("errorResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("data")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("null"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Result"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("error")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String message"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Result"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token function"}},[t._v("builder")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("code")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("msg")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("data")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("null"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v("  ErrorResult "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("/**\n     * 错误类型\n     */")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("ILLEGAL_PARAMS")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("400")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"illegal arguments"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("INVALID_TOKEN")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("401")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"invalid token"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" code"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" String message"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getCode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" code"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" String "),a("span",{attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" message"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token function"}},[t._v("ErrorResult")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String message"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" code"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" message"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("上面代码就是作用2、3点提及的枚举的工程应用，代码比较简单，不做解析。")]),t._v(" "),a("h2",{attrs:{id:"枚举类字节码分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#枚举类字节码分析","aria-hidden":"true"}},[t._v("#")]),t._v(" 枚举类字节码分析")]),t._v(" "),a("p",[t._v("先对枚举类基本的字节码做基本的分析，细节后面会慢慢提及，会尽量一步一步去介绍字节码，降低阅读难度。我们先来看一个最简单的枚举类：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" Color"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    RED"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    BLUE"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("编译成class文件之后，用javap解析字节码：javap -v Color.class，下面是完整的字节码，后面将逐一做分析。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("Classfile "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("D"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("untitled"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("out"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("production"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("untitled"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Color"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v("\n  "),a("span",{attrs:{class:"token class-name"}},[t._v("Last")]),t._v(" modified "),a("span",{attrs:{class:"token number"}},[t._v("2018")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" size "),a("span",{attrs:{class:"token number"}},[t._v("840")]),t._v(" bytes\n  MD5 checksum "),a("span",{attrs:{class:"token number"}},[t._v("57")]),t._v("b2d489954a5f4eb4361793251c2f31\n  Compiled from "),a("span",{attrs:{class:"token string"}},[t._v('"Color.java"')]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Color")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("java"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lang"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Enum")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Color"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  minor version"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n  major version"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("54")]),t._v("\n  flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PUBLIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_FINAL"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_SUPER"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_ENUM\nConstant pool"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Fieldref           #"),a("span",{attrs:{class:"token number"}},[t._v("4.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("36")]),t._v("         "),a("span",{attrs:{class:"token comment"}},[t._v("// Color.$VALUES:[LColor;")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Methodref          #"),a("span",{attrs:{class:"token number"}},[t._v("37.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("38")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v('// "[LColor;".clone:()Ljava/lang/Object;')]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Class              #"),a("span",{attrs:{class:"token number"}},[t._v("17")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v('// "[LColor;"')]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Class              #"),a("span",{attrs:{class:"token number"}},[t._v("39")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v("// Color")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("5")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Methodref          #"),a("span",{attrs:{class:"token number"}},[t._v("12.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("40")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// java/lang/Enum.valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("6")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Methodref          #"),a("span",{attrs:{class:"token number"}},[t._v("12.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("41")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v('// java/lang/Enum."<init>":(Ljava/lang/String;I)V')]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("7")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" String             #"),a("span",{attrs:{class:"token number"}},[t._v("13")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v("// RED")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("8")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Methodref          #"),a("span",{attrs:{class:"token number"}},[t._v("4.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("41")]),t._v("         "),a("span",{attrs:{class:"token comment"}},[t._v('// Color."<init>":(Ljava/lang/String;I)V')]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("9")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Fieldref           #"),a("span",{attrs:{class:"token number"}},[t._v("4.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("42")]),t._v("         "),a("span",{attrs:{class:"token comment"}},[t._v("// Color.RED:LColor;")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("10")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" String             #"),a("span",{attrs:{class:"token number"}},[t._v("15")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v("// BLUE")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("11")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Fieldref           #"),a("span",{attrs:{class:"token number"}},[t._v("4.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("43")]),t._v("         "),a("span",{attrs:{class:"token comment"}},[t._v("// Color.BLUE:LColor;")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("12")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Class              #"),a("span",{attrs:{class:"token number"}},[t._v("44")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v("// java/lang/Enum")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("13")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               RED\n  #"),a("span",{attrs:{class:"token number"}},[t._v("14")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("15")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               BLUE\n  #"),a("span",{attrs:{class:"token number"}},[t._v("16")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               $VALUES\n  #"),a("span",{attrs:{class:"token number"}},[t._v("17")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               values\n  #"),a("span",{attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("20")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Code\n  #"),a("span",{attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               LineNumberTable\n  #"),a("span",{attrs:{class:"token number"}},[t._v("22")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               valueOf\n  #"),a("span",{attrs:{class:"token number"}},[t._v("23")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("24")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               LocalVariableTable\n  #"),a("span",{attrs:{class:"token number"}},[t._v("25")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               name\n  #"),a("span",{attrs:{class:"token number"}},[t._v("26")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("27")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("init"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("28")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("I"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n  #"),a("span",{attrs:{class:"token number"}},[t._v("29")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("30")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Signature\n  #"),a("span",{attrs:{class:"token number"}},[t._v("31")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n  #"),a("span",{attrs:{class:"token number"}},[t._v("32")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("clinit"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("33")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Enum"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("34")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               SourceFile\n  #"),a("span",{attrs:{class:"token number"}},[t._v("35")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Color"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java\n  #"),a("span",{attrs:{class:"token number"}},[t._v("36")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" NameAndType        #"),a("span",{attrs:{class:"token number"}},[t._v("16")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("17")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// $VALUES:[LColor;")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("37")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Class              #"),a("span",{attrs:{class:"token number"}},[t._v("17")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v('// "[LColor;"')]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("38")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" NameAndType        #"),a("span",{attrs:{class:"token number"}},[t._v("45")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("46")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// clone:()Ljava/lang/Object;")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("39")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Color\n  #"),a("span",{attrs:{class:"token number"}},[t._v("40")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" NameAndType        #"),a("span",{attrs:{class:"token number"}},[t._v("22")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("47")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("41")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" NameAndType        #"),a("span",{attrs:{class:"token number"}},[t._v("27")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("28")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v('// "<init>":(Ljava/lang/String;I)V')]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("42")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" NameAndType        #"),a("span",{attrs:{class:"token number"}},[t._v("13")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("14")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// RED:LColor;")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("43")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" NameAndType        #"),a("span",{attrs:{class:"token number"}},[t._v("15")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("14")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// BLUE:LColor;")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("44")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               java"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Enum\n  #"),a("span",{attrs:{class:"token number"}},[t._v("45")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               clone\n  #"),a("span",{attrs:{class:"token number"}},[t._v("46")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("47")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Class"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Enum"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" Color RED"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PUBLIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_STATIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_FINAL"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_ENUM\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" Color BLUE"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PUBLIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_STATIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_FINAL"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_ENUM\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" Color"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("values")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PUBLIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_STATIC\n    Code"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      stack"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locals"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args_size"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" getstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Field $VALUES:[LColor;")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokevirtual #"),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// Method "[LColor;".clone:()Ljava/lang/Object;')]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("6")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" checkcast     #"),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// class "[LColor;"')]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("9")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" areturn\n      LineNumberTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" Color "),a("span",{attrs:{class:"token function"}},[t._v("valueOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("java"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lang"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PUBLIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_STATIC\n    Code"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      stack"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locals"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args_size"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ldc           #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// class Color")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aload_0\n         "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokestatic  #"),a("span",{attrs:{class:"token number"}},[t._v("5")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Method java/lang/Enum.valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("6")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" checkcast     #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// class Color")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("9")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" areturn\n      LineNumberTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n      LocalVariableTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        Start  Length  Slot  Name   Signature\n            "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("      "),a("span",{attrs:{class:"token number"}},[t._v("10")]),t._v("     "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("  name   Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_STATIC\n    Code"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      stack"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("4")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locals"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args_size"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v("           #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// class Color")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" dup\n         "),a("span",{attrs:{class:"token number"}},[t._v("4")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ldc           #"),a("span",{attrs:{class:"token number"}},[t._v("7")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// String RED")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("6")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_0\n         "),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokespecial #"),a("span",{attrs:{class:"token number"}},[t._v("8")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// Method "<init>":(Ljava/lang/String;I)V')]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" putstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("9")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Field RED:LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("13")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v("           #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// class Color")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("16")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" dup\n        "),a("span",{attrs:{class:"token number"}},[t._v("17")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ldc           #"),a("span",{attrs:{class:"token number"}},[t._v("10")]),t._v("                 "),a("span",{attrs:{class:"token comment"}},[t._v("// String BLUE")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("19")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_1\n        "),a("span",{attrs:{class:"token number"}},[t._v("20")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokespecial #"),a("span",{attrs:{class:"token number"}},[t._v("8")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// Method "<init>":(Ljava/lang/String;I)V')]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("23")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" putstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("11")]),t._v("                 "),a("span",{attrs:{class:"token comment"}},[t._v("// Field BLUE:LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("26")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_2\n        "),a("span",{attrs:{class:"token number"}},[t._v("27")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" anewarray     #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// class Color")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("30")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" dup\n        "),a("span",{attrs:{class:"token number"}},[t._v("31")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_0\n        "),a("span",{attrs:{class:"token number"}},[t._v("32")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" getstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("9")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Field RED:LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("35")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aastore\n        "),a("span",{attrs:{class:"token number"}},[t._v("36")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" dup\n        "),a("span",{attrs:{class:"token number"}},[t._v("37")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_1\n        "),a("span",{attrs:{class:"token number"}},[t._v("38")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" getstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("11")]),t._v("                 "),a("span",{attrs:{class:"token comment"}},[t._v("// Field BLUE:LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("41")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aastore\n        "),a("span",{attrs:{class:"token number"}},[t._v("42")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" putstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Field $VALUES:[LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("45")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n      LineNumberTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("6")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("13")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("26")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nSignature"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{attrs:{class:"token number"}},[t._v("33")]),t._v("                          "),a("span",{attrs:{class:"token comment"}},[t._v("// Ljava/lang/Enum<LColor;>;")]),t._v("\nSourceFile"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Color.java"')]),t._v("\n")])])]),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Color")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("java"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lang"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Enum")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Color"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("可以看出枚举类是默认是继承了java.lang.Enum类，Java字节码格式并不禁止继承java.lang.Enum，但是javac编译器硬性不让你继承java.lang.Enum，Kotilin编译器是可以继承Enum的，如下图：\n"),a("img",{attrs:{src:"https://grandachn-1258245022.cos.ap-guangzhou.myqcloud.com/20181022155439646.png",alt:"Kotilin代码继承Enum"}})]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" Color RED"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PUBLIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_STATIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_FINAL"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_ENUM\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" Color BLUE"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdescriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tflags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PUBLIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_STATIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_FINAL"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_ENUM\n")])])]),a("p",[t._v("枚举量RED和BLUE被编译成Color类的final类变量。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" Color"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("values")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PUBLIC"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_STATIC\n    Code"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      stack"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locals"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args_size"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" getstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Field $VALUES:[LColor;")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokevirtual #"),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// Method "[LColor;".clone:()Ljava/lang/Object;')]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("6")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" checkcast     #"),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// class "[LColor;"')]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("9")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" areturn\n      LineNumberTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])]),a("p",[t._v("values()用来返回定义的枚举量的数组，该方法由编译器生成，在java.lang.Enum类中都是找不到的。简单解释一下该方法的字节码：首先getstatic获取常量池中的Color[]变量，调用它的clone()方法返回一个java/lang/Object对象，checkcast #3（#3 对应常量池中的[LColor，[表示是数组，L表示是应用类型）检查java/lang/Object对象是否是Color[]对象，areturn从当前方法返回对象引用。至于这个常量池中的Color[]变量是怎么初始化的呢，下面继续看。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_STATIC\n    Code"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      stack"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("4")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locals"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args_size"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v("           #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// class Color")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" dup\n         "),a("span",{attrs:{class:"token number"}},[t._v("4")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ldc           #"),a("span",{attrs:{class:"token number"}},[t._v("7")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// String RED")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("6")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_0\n         "),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokespecial #"),a("span",{attrs:{class:"token number"}},[t._v("8")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// Method "<init>":(Ljava/lang/String;I)V')]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" putstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("9")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Field RED:LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("13")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v("           #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// class Color")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("16")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" dup\n        "),a("span",{attrs:{class:"token number"}},[t._v("17")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ldc           #"),a("span",{attrs:{class:"token number"}},[t._v("10")]),t._v("                 "),a("span",{attrs:{class:"token comment"}},[t._v("// String BLUE")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("19")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_1\n        "),a("span",{attrs:{class:"token number"}},[t._v("20")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokespecial #"),a("span",{attrs:{class:"token number"}},[t._v("8")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// Method "<init>":(Ljava/lang/String;I)V')]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("23")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" putstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("11")]),t._v("                 "),a("span",{attrs:{class:"token comment"}},[t._v("// Field BLUE:LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("26")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_2\n        "),a("span",{attrs:{class:"token number"}},[t._v("27")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" anewarray     #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// class Color")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("30")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" dup\n        "),a("span",{attrs:{class:"token number"}},[t._v("31")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_0\n        "),a("span",{attrs:{class:"token number"}},[t._v("32")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" getstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("9")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Field RED:LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("35")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aastore\n        "),a("span",{attrs:{class:"token number"}},[t._v("36")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" dup\n        "),a("span",{attrs:{class:"token number"}},[t._v("37")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iconst_1\n        "),a("span",{attrs:{class:"token number"}},[t._v("38")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" getstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("11")]),t._v("                 "),a("span",{attrs:{class:"token comment"}},[t._v("// Field BLUE:LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("41")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aastore\n        "),a("span",{attrs:{class:"token number"}},[t._v("42")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" putstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Field $VALUES:[LColor;")]),t._v("\n        "),a("span",{attrs:{class:"token number"}},[t._v("45")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n      LineNumberTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("6")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("13")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("26")]),t._v("\n")])])]),a("p",[t._v("上面是static代码块，会在一个类被加载时执行。从27行看起， anewarray   创建一个引用型（如类，接口，数组）的数组，并将其引用值压入栈顶，dup复制栈顶数值并将复制值压入栈顶 ，iconst_0将int型0推送至栈顶 ，getstatic 获取指定类的静态域，并将其值压入栈顶 ， aastore将栈顶引用型数值存入指定数组的指定索引位置。36到41行重复以上操作，42行putstatic为指定的类的静态域赋值，即将栈中的Color[]的引用赋值到Color类的静态域，最后return，也就完成了Color[]的初始化。")]),t._v(" "),a("p",[t._v("上面提及的栈是"),a("strong",[t._v("栈帧")]),t._v("的"),a("strong",[t._v("操作数栈")]),t._v("，JVM中一个线程会有一个对应的线程栈，线程栈中压入弹出的基本单位是栈帧，一个方法的调用，会让该方法对应的栈帧入栈，方法return，对应的栈帧出栈。其中，每个栈帧中会有一个自己的操作数栈，是用来存放jvm指令的操作数的。操作数栈的变化如下图:\n"),a("img",{attrs:{src:"https://grandachn-1258245022.cos.ap-guangzhou.myqcloud.com/20181022164729149.png",alt:"在这里插入图片描述"}})]),t._v(" "),a("h2",{attrs:{id:"values-方法和ordinal-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#values-方法和ordinal-方法","aria-hidden":"true"}},[t._v("#")]),t._v(" values()方法和ordinal()方法")]),t._v(" "),a("p",[t._v("values()方法返回一个包含所有定义枚举量的数组，数组中枚举量的顺序和定义的先后顺序是一致的。values()方法在上一节中也详细分析过其字节码，故不再过多解释。ordinal()方法返回一个int的值，该值从0开始递增，反映了枚举量的定义顺序。如前文中的Color枚举类，Color.RED.ordinal()返回的是0， Color.BLUE.ordinal()返回的是1。")]),t._v(" "),a("h2",{attrs:{id:"枚举类特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#枚举类特性","aria-hidden":"true"}},[t._v("#")]),t._v(" 枚举类特性")]),t._v(" "),a("h3",{attrs:{id:"_1-支持定义方法，同时支持方法的重写（override）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-支持定义方法，同时支持方法的重写（override）","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.支持定义方法，同时支持方法的重写（Override）")]),t._v(" "),a("p",[t._v("枚举类的字节码也是个普通的类，支持定义方法自然就不用说了。但是枚举类的字节码是被final修饰的，final修饰的类是不能被继承的，我们一般方法的重写是子类重写父类的方法，既然枚举不能被继承，那重写又是怎么实现的呢？我们先看代码：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" Color "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    RED"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("paint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"I am red"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    BLUE"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("paint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"I am blue"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    DEFAULT"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("paint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"I am color"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("main")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        RED"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("paint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        BLUE"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("paint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        DEFAULT"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("paint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("执行main()方法，输出如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("I am red\nI am blue\nI am color\n")])])]),a("p",[t._v("RED和BLUE不都是Color类的一个对象吗，怎么就可以重写方法了呢？ 这里不难猜到，RED和BLUE应该都是Color类的子类的实例，是子类对方法进行了重写，为了验证我们的猜想，我们看看编译的class文件。\n"),a("img",{attrs:{src:"https://grandachn-1258245022.cos.ap-guangzhou.myqcloud.com/20181022172600150.png",alt:"在这里插入图片描述"}}),t._v("\n熟悉匿名内部类的很容易就看出这个Color$1.class和Color$2.class是Color的匿名内部类了。\n我们反编译一下Color$1.class，如下：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v(" Classfile "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("D"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("javaTest"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("out"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("production"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("javaTest"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Color$"),a("span",{attrs:{class:"token number"}},[t._v("1.")]),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v("\n  "),a("span",{attrs:{class:"token class-name"}},[t._v("Last")]),t._v(" modified "),a("span",{attrs:{class:"token number"}},[t._v("2018")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token number"}},[t._v("22")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" size "),a("span",{attrs:{class:"token number"}},[t._v("576")]),t._v(" bytes\n  MD5 checksum "),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v("c7b8ff46935f53c4e0a0bc0a6d935dc\n  Compiled from "),a("span",{attrs:{class:"token string"}},[t._v('"Color.java"')]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Color")]),t._v("$"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Color")]),t._v("\n  minor version"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n  major version"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("52")]),t._v("\n  flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_FINAL"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_SUPER"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ACC_ENUM\nConstant pool"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Methodref          #"),a("span",{attrs:{class:"token number"}},[t._v("6.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("20")]),t._v("         "),a("span",{attrs:{class:"token comment"}},[t._v('// Color."<init>":(Ljava/lang/String;ILColor$1;)V')]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Fieldref           #"),a("span",{attrs:{class:"token number"}},[t._v("21.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("22")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// java/lang/System.out:Ljava/io/PrintStream;")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" String             #"),a("span",{attrs:{class:"token number"}},[t._v("23")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v("// I am red")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Methodref          #"),a("span",{attrs:{class:"token number"}},[t._v("24.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("25")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// java/io/PrintStream.println:(Ljava/lang/String;)V")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("5")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Class              #"),a("span",{attrs:{class:"token number"}},[t._v("26")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v("// Color$1")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("6")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Class              #"),a("span",{attrs:{class:"token number"}},[t._v("27")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v("// Color")]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("7")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("init"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   #"),a("span",{attrs:{class:"token number"}},[t._v("8")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("I"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n   #"),a("span",{attrs:{class:"token number"}},[t._v("9")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Code\n  #"),a("span",{attrs:{class:"token number"}},[t._v("10")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               LineNumberTable\n  #"),a("span",{attrs:{class:"token number"}},[t._v("11")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               LocalVariableTable\n  #"),a("span",{attrs:{class:"token number"}},[t._v("12")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("13")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               InnerClasses\n  #"),a("span",{attrs:{class:"token number"}},[t._v("14")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               LColor$"),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("15")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               paint\n  #"),a("span",{attrs:{class:"token number"}},[t._v("16")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n  #"),a("span",{attrs:{class:"token number"}},[t._v("17")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               SourceFile\n  #"),a("span",{attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Color"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java\n  #"),a("span",{attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               EnclosingMethod\n  #"),a("span",{attrs:{class:"token number"}},[t._v("20")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" NameAndType        #"),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("28")]),t._v("         "),a("span",{attrs:{class:"token comment"}},[t._v('// "<init>":(Ljava/lang/String;ILColor$1;)V')]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Class              #"),a("span",{attrs:{class:"token number"}},[t._v("29")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v("// java/lang/System")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("22")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" NameAndType        #"),a("span",{attrs:{class:"token number"}},[t._v("30")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("31")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// out:Ljava/io/PrintStream;")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("23")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               I am red\n  #"),a("span",{attrs:{class:"token number"}},[t._v("24")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Class              #"),a("span",{attrs:{class:"token number"}},[t._v("32")]),t._v("            "),a("span",{attrs:{class:"token comment"}},[t._v("// java/io/PrintStream")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("25")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" NameAndType        #"),a("span",{attrs:{class:"token number"}},[t._v("33")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("34")]),t._v("        "),a("span",{attrs:{class:"token comment"}},[t._v("// println:(Ljava/lang/String;)V")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("26")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Color$"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("27")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Color\n  #"),a("span",{attrs:{class:"token number"}},[t._v("28")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("ILColor$"),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n  #"),a("span",{attrs:{class:"token number"}},[t._v("29")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               java"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("System\n  #"),a("span",{attrs:{class:"token number"}},[t._v("30")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               out\n  #"),a("span",{attrs:{class:"token number"}},[t._v("31")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("io"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("PrintStream"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  #"),a("span",{attrs:{class:"token number"}},[t._v("32")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               java"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("io"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("PrintStream\n  #"),a("span",{attrs:{class:"token number"}},[t._v("33")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               println\n  #"),a("span",{attrs:{class:"token number"}},[t._v("34")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Utf8               "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Color$"),a("span",{attrs:{class:"token function"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("java"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lang"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("I"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    Code"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      stack"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("4")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locals"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args_size"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aload_0\n         "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aload_1\n         "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iload_2\n         "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aconst_null\n         "),a("span",{attrs:{class:"token number"}},[t._v("4")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokespecial #"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// Method Color."<init>":(Ljava/lang/String;ILColor$1;)V')]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n      LineNumberTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("6")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n      LocalVariableTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        Start  Length  Slot  Name   Signature\n            "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("       "),a("span",{attrs:{class:"token number"}},[t._v("8")]),t._v("     "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),t._v("   LColor$"),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("paint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PUBLIC\n    Code"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      stack"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locals"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args_size"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" getstatic     #"),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Field java/lang/System.out:Ljava/io/PrintStream;")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ldc           #"),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// String I am red")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokevirtual #"),a("span",{attrs:{class:"token number"}},[t._v("4")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Method java/io/PrintStream.println:(Ljava/lang/String;)V")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("8")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n      LineNumberTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("9")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("8")]),t._v("\n      LocalVariableTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        Start  Length  Slot  Name   Signature\n            "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("       "),a("span",{attrs:{class:"token number"}},[t._v("9")]),t._v("     "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),t._v("   LColor$"),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nSourceFile"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Color.java"')]),t._v("\nEnclosingMethod"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{attrs:{class:"token number"}},[t._v("6.")]),t._v("#"),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v("// Color")]),t._v("\nInnerClasses"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n     "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" #"),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("//class Color$1")]),t._v("\n")])])]),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Color")]),t._v("$"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Color")]),t._v("\n")])])]),a("p",[t._v("看来final修饰的类只是对开发者来说是不能继承的，编译器校验到继承了final类的时候会报错退出编译。对编译器生成的类来说，还是可以继承final类的。试了一下，将先编译子类，再将父类改成final，再编译父类，绕过了编译器的语法校验，执行时还是会报出如下运行时异常：\n"),a("img",{attrs:{src:"https://grandachn-1258245022.cos.ap-guangzhou.myqcloud.com/20181022175337408.png",alt:"在这里插入图片描述"}}),t._v("\n看来在ClassLoader进行类加载的时候，还是会检查子类是否继承了final的父类，这里我猜想可能是对内部类继承final类放开了限制，要是我们编写这样的内部类的话直接就编译不了了，至于是不是如此就得看JVM的源码或者是暴力构建这样的类的字节码了。")]),t._v(" "),a("p",[t._v("这里再稍微提一下"),a("strong",[t._v("匿名内部类")]),t._v(":")]),t._v(" "),a("ol",[a("li",[t._v("使用匿名内部类时，我们必须是继承一个类或者实现一个接口，但是两者不可兼得，同时也只能继承一个类或者实现一个接口。")]),t._v(" "),a("li",[t._v("匿名内部类中是不能定义构造函数的。")]),t._v(" "),a("li",[t._v("匿名内部类中不能存在任何的静态成员变量和静态方法。")]),t._v(" "),a("li",[t._v("匿名内部类为局部内部类，所以局部内部类的所有限制同样对匿名内部类生效。")]),t._v(" "),a("li",[t._v("匿名内部类不能是抽象的，它必须要实现继承的类或者实现的接口的所有抽象方法。")])]),t._v(" "),a("h3",{attrs:{id:"_2-可实现接口，不可继承"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-可实现接口，不可继承","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.可实现接口，不可继承")]),t._v(" "),a("p",[t._v("前面提到，枚举类是默认继承了java.lang.Emum类的，Java语言是单继承的，所以枚举类自然就不能继承其他类了，但是枚举类是可以实现接口的，这带来的好处除了用接口去规范枚举类里面的方法，还能够用接口去组织枚举。\n接口组织枚举类的参考代码如下：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Food")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" Appetizer "),a("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Food")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        SALAD"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SOUP"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SPRING_ROLLS\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" Coffee "),a("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Food")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        BLACK_COFFEE"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TEA"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LATTE\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" Dessert "),a("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Food")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        FRUIT"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" GELATO"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LASAGNE\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"name和ordinal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#name和ordinal","aria-hidden":"true"}},[t._v("#")]),t._v(" name和ordinal")]),t._v(" "),a("p",[t._v("使用javap -v -p Color.class命令，带-v查看private方法，可以看到该Color枚举的构造方法如下：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Color")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descriptor"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ljava"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lang"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("I"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("V\n    flags"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ACC_PRIVATE\n    Code"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      stack"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locals"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args_size"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aload_0\n         "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" aload_1\n         "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" iload_2\n         "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" invokespecial #"),a("span",{attrs:{class:"token number"}},[t._v("6")]),t._v("                  "),a("span",{attrs:{class:"token comment"}},[t._v('// Method java/lang/Enum."<init>":(Ljava/lang/String;I)V')]),t._v("\n         "),a("span",{attrs:{class:"token number"}},[t._v("6")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n      LineNumberTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        line "),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n      LocalVariableTable"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        Start  Length  Slot  Name   Signature\n            "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("       "),a("span",{attrs:{class:"token number"}},[t._v("7")]),t._v("     "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),t._v("   LColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Signature"),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{attrs:{class:"token number"}},[t._v("31")]),t._v("                          "),a("span",{attrs:{class:"token comment"}},[t._v("// ()V")]),t._v("\n")])])]),a("p",[t._v("上面这段字节码转成java代码就是：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Color")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" ordinal"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ordinal"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("其实就是调用了java.lang.Enum类的构造方法，其构造方法如下")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("/**\n * Sole constructor.  Programmers cannot invoke this constructor.\n * It is for use by code emitted by the compiler in response to\n * enum type declarations.\n *\n * @param name - The name of this enum constant, which is the identifier\n *               used to declare it.\n * @param ordinal - The ordinal of this enumeration constant (its position\n *         in the enum declaration, where the initial constant is assigned\n *         an ordinal of zero).\n */")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Enum")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" ordinal"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ordinal "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ordinal"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("如注释里面说的,这个构造方法是不能被开发者调用的，这个方法是编译器在编译声明的枚举类的时候，会被编译器调用，这里的name默认是枚举类型的名称，ordinal从0开始递增。但是如果就是想改变这个name和ordinal的值，也是可以通过反射实现的。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Color")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" ordinal"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ordinal "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ordinal"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),a("span",{attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         Field ordinalField "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getClass")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getSuperclass")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getDeclaredField")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"ordinal"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         ordinalField"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setAccessible")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         ordinalField"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("set")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ordinal"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         ordinalField"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setAccessible")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n         Field nameField "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getClass")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getSuperclass")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getDeclaredField")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"name"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         nameField"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setAccessible")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         nameField"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("set")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         nameField"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setAccessible")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     \n     "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"enumset和enummap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enumset和enummap","aria-hidden":"true"}},[t._v("#")]),t._v(" EnumSet和EnumMap")]),t._v(" "),a("h3",{attrs:{id:"_1-enumset替代位域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-enumset替代位域","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. EnumSet替代位域")]),t._v(" "),a("p",[t._v("EnumSet是元素为枚举类的Set集合类，底层使用位域保存信息，速度比HashSet还要快。EnumSet是基于一个long类型的变量保存集合元素，一个long类型有64位（bit），每一个枚举元素需要1bit来表示该枚举元素是否处于EnumSet中。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("EnumSet"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java\n"),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\n\n"),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@SafeVarargs")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("E "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Enum")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" EnumSet"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("of")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("E first"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" E"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" rest"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    EnumSet"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" result "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("noneOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("first"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getDeclaringClass")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    result"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("add")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("first"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("E e "),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" rest"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        result"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("add")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("E "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Enum")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" EnumSet"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("noneOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Class"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" elementType"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Enum"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("?")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" universe "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getUniverse")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elementType"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("universe "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" null"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("ClassCastException")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elementType "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('" not an enum"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("universe"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("64")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("RegularEnumSet")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elementType"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" universe"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("JumboEnumSet")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elementType"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" universe"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("可以看出，当枚举类的枚举量少于64时，会使用RegularEnumSet，否则会使用JumboEnumSet，这两个类都是EnumSet的子类，我们简单地看一下这两个类。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("RegularEnumSet")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("E "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Enum")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("EnumSet")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token comment"}},[t._v("/**\n     * Bit vector representation of this set.  The 2^k bit indicates the\n     * presence of universe[k] in this set.\n     */")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" elements "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("L"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n\t"),a("span",{attrs:{class:"token comment"}},[t._v("/**\n     * Adds the specified element to this set if it is not already present.\n     *\n     * @param e element to be added to this set\n     * @return <tt>true</tt> if the set changed as a result of the call\n     *\n     * @throws NullPointerException if <tt>e</tt> is null\n     */")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("add")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("E e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("typeCheck")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" oldElements "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" elements"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        elements "),a("span",{attrs:{class:"token operator"}},[t._v("|=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("L "),a("span",{attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Enum"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("?")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("ordinal")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" elements "),a("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" oldElements"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("/**\n     * Removes the specified element from this set if it is present.\n     *\n     * @param e element to be removed from this set, if present\n     * @return <tt>true</tt> if the set contained the specified element\n     */")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("remove")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" null"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        Class"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("?")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" eClass "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getClass")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eClass "),a("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" elementType "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" eClass"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getSuperclass")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" elementType"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" oldElements "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" elements"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        elements "),a("span",{attrs:{class:"token operator"}},[t._v("&=")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("~")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("L "),a("span",{attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Enum"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("?")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("ordinal")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" elements "),a("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" oldElements"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("RegularEnumSet是用一个long类型的变量elements来表示集合里的元素。添加元素关键代码："),a("strong",[t._v("elements |= (1L << ((Enum<?>)e).ordinal());** 删除元素关键代码： **elements &= ~(1L << ((Enum<?>)e).ordinal());")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("JumboEnumSet")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("E "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Enum")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("EnumSet")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("E"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{attrs:{class:"token comment"}},[t._v("/**\n     * Bit vector representation of this set.  The ith bit of the jth\n     * element of this array represents the  presence of universe[64*j +i]\n     * in this set.\n     */")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" elements"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("JumboEnumSet只是用long类型的数组elements代替long类型的变量elements来保存数量超过64的枚举量，集合类操作具体的实现细节就不细说了。")]),t._v(" "),a("h3",{attrs:{id:"_2-enummap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-enummap","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. EnumMap")]),t._v(" "),a("p",[t._v("如果Map的Key类型是枚举类型的话， 相比于HashMap，更推荐使用EnumMap。EnumMap的key只能是Enum类，底层实现是基于数组的。一般用于保存一个枚举类对应的额外的业务信息。下面简单看下其部分代码：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("EnumMap")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("K "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Enum")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("K"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" V"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("AbstractMap")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("K"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" V"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("java"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Serializable")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Cloneable\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("/**\n     * The <tt>Class</tt> object for the enum type of all the keys of this map.\n     *\n     * @serial\n     */")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" Class"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("K"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" keyType"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("/**\n     * All of the values comprising K.  (Cached for performance.)  \n     * 这个数组对应枚举类的所有枚举量\n     */")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("transient")]),t._v(" K"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" keyUniverse"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("/**\n     * Array representation of this map.  The ith element is the value\n     * to which universe[i] is currently mapped, or null if it isn't\n     * mapped to anything, or NULL if it's mapped to null.\n     * 这里就是枚举量对应的value的值的存放的数组\n     */")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("transient")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" vals"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" V "),a("span",{attrs:{class:"token function"}},[t._v("put")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("K key"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" V value"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("typeCheck")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{attrs:{class:"token comment"}},[t._v("//用枚举量的ordinal值，作为vals数组的index，存放其对应value值")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" index "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" key"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("ordinal")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        Object oldValue "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" vals"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        vals"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("maskNull")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldValue "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" null"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            size"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("unmaskNull")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldValue"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"单例模式的最佳实现：枚举"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单例模式的最佳实现：枚举","aria-hidden":"true"}},[t._v("#")]),t._v(" 单例模式的最佳实现：枚举")]),t._v(" "),a("p",[a("strong",[t._v("饿汉式单例")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" People INSTANCE "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("eat")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("基于静态工厂方法的饿汉式单例")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" People INSTANCE "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" People "),a("span",{attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" INSTANCE"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("eat")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("为了使以上实现的单例类变成可序列化的，仅仅在类的声明中添加“implements Serializable”是不够的。为了维护并保证单例，必须所有声明的实例变量都是transient的，并提供一个readResolve方法。否则，每次反序列化一个序列化的实例的时候，都会创建一个新的实例。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" Object "),a("span",{attrs:{class:"token function"}},[t._v("readResolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" INSTANCE"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("对于一个正在被反序列化的对象，如果它的类定义了一个readResolve方法，并且具有正确的声明，那么在反序列化之后，新建对象上的readResolve方法就会被调用。然后，该方法返回的对象引用将被返回，取代新建的对象。")]),t._v(" "),a("p",[a("strong",[t._v("基于双检查锁机制的懒汉式单例")]),t._v("（线程安全）：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    "),a("span",{attrs:{class:"token comment"}},[t._v("//使用volatile关键字保其可见性  ")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("volatile")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" People INSTANCE "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" null"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n      \n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" People "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n       \n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" People "),a("span",{attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n        "),a("span",{attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    \n\t            "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("INSTANCE "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" null"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t                "),a("span",{attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("People"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n\t                    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("INSTANCE "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" null"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token comment"}},[t._v("//二次检查  ")]),t._v("\n\t                        INSTANCE "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n\t                    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("   \n\t\t            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("   \n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   \n            e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" INSTANCE "),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),a("p",[a("strong",[t._v("基于静态内部类的懒汉式单例")]),t._v("（线程安全）：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    "),a("span",{attrs:{class:"token comment"}},[t._v("//内部类  ")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("PeopleHolder")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n        "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" People instance "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("   \n    "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n       \n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" People "),a("span",{attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   \n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" PeopleHolder"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),a("p",[t._v("这种使用内部类的懒汉式单例模式相比于双检查锁代码更加简洁易懂，借助JVM类加载时的锁机制（确保一个类类只会被同一ClassLoader加载一次），实现线程安全的、延迟加载的单例模式。")]),t._v(" "),a("p",[a("strong",[t._v("基于枚举类的单例")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" People"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tINSTANCE"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("eat")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("使用枚举实现单例将更加简洁，无偿地提供了序列化机制，绝对防止多次实例化，即使是在面对复杂的序列化或者反射攻击的时候。虽然这种方法还没有被广泛采用，但是"),a("strong",[t._v("单元素的枚举类型已经成为实现Singleton的最佳方法")]),t._v("。")]),t._v(" "),a("p",[a("strong",[t._v("基于静态工厂方法和枚举类单例")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" PeopleEnum"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tINSTANCE"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" People instance"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("PeopleEnum")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            instance "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" People "),a("span",{attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n            "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" instance"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("People")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" People "),a("span",{attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" PeopleEnum"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("INSTANCE "),a("span",{attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("eat")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("个人觉得这么写虽然没有暴露内部实现，但是还不如直接写成前面的 "),a("strong",[t._v("基于静态内部类的懒汉式单例")]),t._v("来的简洁，这样子使用枚举实现单例并没有体现出什么优势。")]),t._v(" "),a("h2",{attrs:{id:"职责链模式的枚举实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#职责链模式的枚举实现","aria-hidden":"true"}},[t._v("#")]),t._v(" 职责链模式的枚举实现")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Mail")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tString type"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Mail")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String type"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" type"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("PostOffice")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" MailHandler"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        A"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("handle")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Mail m"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"A"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"A handle success"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        B"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("handle")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Mail m"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"B"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"B handle success"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        C"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("handle")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Mail m"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"C"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"C handle success"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("handle")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Mail m"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("handler")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Mail m"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MailHandler handler "),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" MailHandler"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("values")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("handle")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"handle fail"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("main")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        Mail mailA "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Mail")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"A"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        Mail mailB "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Mail")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"B"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        Mail mailC "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Mail")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"C"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        Mail mailD "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Mail")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"D"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token function"}},[t._v("handler")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mailA"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"-----------"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("handler")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mailB"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"-----------"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("handler")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mailC"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"-----------"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("handler")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mailD"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("上面的例子简化了《thinking in java》的例子，其运行的输出如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("A handle success\n-----------\nB handle success\n-----------\nC handle success\n-----------\nhandle fail\n")])])]),a("p",[t._v("通常实现职责链模式是通过继承抽象类或者实现接口，链中每新增一个新的元素，就新建一个类，然后通过修改配置文件，或者修改代码将该类加入职责链中。Enum给职责链的实现提供了一个新的思路，链中新增一个元素只需要新增一个枚举量，但是也有一定的不足，使用Enum实现的职责链，链中元素不能被其他链复用自由组合，是否使用Enum去实现职责链还是要根据实际情况去取舍。")])])}],!1,null,null,null);o.options.__file="Java枚举类.md";s.default=o.exports}}]);